name: "CD - Deploy Automático no GitHub Pages"

on:
  push:
    branches: [ "main" ]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Clonar repositório
        uses: actions/checkout@v4

      - name: Instalar utilitário de deploy
        run: npm install -g gh-pages

      - name: Publicar site
        run: |
          mkdir -p public
          cp index.html public/
          npx gh-pages -d public -u "github-actions-bot <support+actions@github.com>" --repo "https://x-access-token:${GITHUB_TOKEN}@github.com/${{ github.repository }}.git"
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Exibir URL do site
        run: |
          echo "Site disponível em: https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/"
